{
    "openapi": "3.0.0",
    "info": {
      "title": "Classroom Management API",
      "version": "1.0.0",
      "description": "API documentation for Classroom Management System",
      "contact": {
        "name": "API Support",
        "email": "support@classroom.com"
      }
    },
    "servers": [
      {
        "url": "http://localhost:8000",
        "description": "Local dev server"
      },
      {
        "url": "https://api.classroom.refine.dev",
        "description": "Production API server"
      }
    ],
    "components": {
      "securitySchemes": {
        "cookieAuth": {
          "type": "apiKey",
          "in": "cookie",
          "name": "better-auth.session"
        }
      },
      "schemas": {
        "Class": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer"
            },
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "inviteCode": {
              "type": "string",
              "maxLength": 20
            },
            "subjectId": {
              "type": "integer"
            },
            "teacherId": {
              "type": "string"
            },
            "description": {
              "type": "string",
              "nullable": true
            },
            "bannerUrl": {
              "type": "string",
              "nullable": true
            },
            "bannerCldPubId": {
              "type": "string",
              "nullable": true,
              "description": "Cloudinary public id for banner"
            },
            "capacity": {
              "type": "integer",
              "default": 50
            },
            "status": {
              "type": "string",
              "enum": ["active", "inactive", "archived"],
              "default": "active"
            },
            "schedules": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/Schedule"
              },
              "default": []
            },
            "createdAt": {
              "type": "string",
              "format": "date-time"
            },
            "updatedAt": {
              "type": "string",
              "format": "date-time"
            }
          },
          "required": [
            "id",
            "name",
            "inviteCode",
            "subjectId",
            "teacherId",
            "status",
            "schedules",
            "createdAt",
            "updatedAt"
          ],
          "additionalProperties": false
        },
        "ClassCreate": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "inviteCode": {
              "type": "string",
              "maxLength": 20
            },
            "subjectId": {
              "type": "integer"
            },
            "teacherId": {
              "type": "string"
            },
            "description": {
              "type": "string",
              "nullable": true
            },
            "bannerUrl": {
              "type": "string",
              "nullable": true
            },
            "bannerCldPubId": {
              "type": "string",
              "nullable": true
            },
            "capacity": {
              "type": "integer"
            },
            "status": {
              "type": "string",
              "enum": ["active", "inactive", "archived"]
            },
            "schedules": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/Schedule"
              }
            }
          },
          "required": ["name", "inviteCode", "subjectId", "teacherId"],
          "additionalProperties": false
        },
        "ClassUpdate": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "inviteCode": {
              "type": "string",
              "maxLength": 20
            },
            "subjectId": {
              "type": "integer"
            },
            "teacherId": {
              "type": "string"
            },
            "description": {
              "type": "string",
              "nullable": true
            },
            "bannerUrl": {
              "type": "string",
              "nullable": true
            },
            "bannerCldPubId": {
              "type": "string",
              "nullable": true
            },
            "capacity": {
              "type": "integer"
            },
            "status": {
              "type": "string",
              "enum": ["active", "inactive", "archived"]
            },
            "schedules": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/Schedule"
              }
            }
          },
          "additionalProperties": false
        },
        "Department": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer"
            },
            "code": {
              "type": "string",
              "maxLength": 50
            },
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "description": {
              "type": "string",
              "nullable": true
            },
            "createdAt": {
              "type": "string",
              "format": "date-time"
            },
            "updatedAt": {
              "type": "string",
              "format": "date-time"
            }
          },
          "required": ["id", "code", "name", "createdAt", "updatedAt"],
          "additionalProperties": false
        },
        "DepartmentCreate": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "maxLength": 50
            },
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "description": {
              "type": "string",
              "nullable": true
            }
          },
          "required": ["code", "name"],
          "additionalProperties": false
        },
        "DepartmentUpdate": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "maxLength": 50
            },
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "description": {
              "type": "string",
              "nullable": true
            }
          },
          "additionalProperties": false
        },
        "Enrollment": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer"
            },
            "studentId": {
              "type": "string"
            },
            "classId": {
              "type": "integer"
            },
            "enrolledAt": {
              "type": "string",
              "format": "date-time"
            },
            "updatedAt": {
              "type": "string",
              "format": "date-time"
            }
          },
          "required": ["id", "studentId", "classId", "enrolledAt", "updatedAt"],
          "additionalProperties": false
        },
        "EnrollmentCreate": {
          "type": "object",
          "properties": {
            "classId": {
              "type": "integer"
            }
          },
          "required": ["classId"],
          "additionalProperties": false
        },
        "EnrollmentJoin": {
          "type": "object",
          "properties": {
            "inviteCode": {
              "type": "string"
            }
          },
          "required": ["inviteCode"],
          "additionalProperties": false
        },
        "Subject": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer"
            },
            "departmentId": {
              "type": "integer"
            },
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "code": {
              "type": "string",
              "maxLength": 50
            },
            "description": {
              "type": "string",
              "nullable": true
            },
            "createdAt": {
              "type": "string",
              "format": "date-time"
            },
            "updatedAt": {
              "type": "string",
              "format": "date-time"
            }
          },
          "required": [
            "id",
            "departmentId",
            "name",
            "code",
            "createdAt",
            "updatedAt"
          ],
          "additionalProperties": false
        },
        "SubjectCreate": {
          "type": "object",
          "properties": {
            "departmentId": {
              "type": "integer"
            },
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "code": {
              "type": "string",
              "maxLength": 50
            },
            "description": {
              "type": "string",
              "nullable": true
            }
          },
          "required": ["departmentId", "name", "code"],
          "additionalProperties": false
        },
        "SubjectUpdate": {
          "type": "object",
          "properties": {
            "departmentId": {
              "type": "integer"
            },
            "name": {
              "type": "string",
              "maxLength": 255
            },
            "code": {
              "type": "string",
              "maxLength": 50
            },
            "description": {
              "type": "string",
              "nullable": true
            }
          },
          "additionalProperties": false
        },
        "User": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string",
              "format": "email"
            },
            "emailVerified": {
              "type": "boolean"
            },
            "image": {
              "type": "string",
              "nullable": true
            },
            "imageCldPubId": {
              "type": "string",
              "nullable": true
            },
            "role": {
              "type": "string",
              "enum": ["admin", "teacher", "student"],
              "default": "student"
            },
            "createdAt": {
              "type": "string",
              "format": "date-time"
            },
            "updatedAt": {
              "type": "string",
              "format": "date-time"
            }
          },
          "required": [
            "id",
            "name",
            "email",
            "emailVerified",
            "role",
            "createdAt",
            "updatedAt"
          ],
          "additionalProperties": false
        },
        "UserCreate": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string",
              "format": "email"
            },
            "emailVerified": {
              "type": "boolean"
            },
            "role": {
              "type": "string",
              "enum": ["admin", "teacher", "student"]
            },
            "image": {
              "type": "string",
              "nullable": true
            },
            "imageCldPubId": {
              "type": "string",
              "nullable": true
            }
          },
          "required": ["id", "name", "email", "role"],
          "additionalProperties": false
        },
        "UserUpdate": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string",
              "format": "email"
            },
            "emailVerified": {
              "type": "boolean"
            },
            "role": {
              "type": "string",
              "enum": ["admin", "teacher", "student"]
            },
            "image": {
              "type": "string",
              "nullable": true
            },
            "imageCldPubId": {
              "type": "string",
              "nullable": true
            }
          },
          "additionalProperties": false
        },
        "Error": {
          "type": "object",
          "properties": {
            "error": {
              "type": "string"
            }
          }
        },
        "RegistrationErrorResponse": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "description": "Machine-readable error code"
            },
            "message": {
              "type": "string",
              "description": "Human-readable error message"
            }
          },
          "required": ["code", "message"],
          "additionalProperties": true
        },
        "Schedule": {
          "type": "object",
          "properties": {
            "day": {
              "type": "string",
              "description": "Day of week (e.g., Mon, Tue)"
            },
            "startTime": {
              "type": "string",
              "description": "Start time (HH:mm)"
            },
            "endTime": {
              "type": "string",
              "description": "End time (HH:mm)"
            }
          },
          "required": ["day", "startTime", "endTime"],
          "additionalProperties": false
        },
        "EnrollmentUpdate": {
          "type": "object",
          "properties": {
            "classId": {
              "type": "integer"
            },
            "studentId": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "SubjectWithDepartment": {
          "allOf": [
            {
              "$ref": "#/components/schemas/Subject"
            },
            {
              "type": "object",
              "properties": {
                "department": {
                  "$ref": "#/components/schemas/Department"
                }
              },
              "required": ["department"],
              "additionalProperties": false
            }
          ]
        },
        "Pagination": {
          "type": "object",
          "properties": {
            "page": {
              "type": "integer"
            },
            "limit": {
              "type": "integer"
            },
            "total": {
              "type": "integer"
            },
            "totalPages": {
              "type": "integer"
            }
          },
          "required": ["page", "limit", "total", "totalPages"],
          "additionalProperties": false,
          "description": "Pagination metadata returned by list endpoints."
        },
        "DepartmentListItem": {
          "allOf": [
            {
              "$ref": "#/components/schemas/Department"
            },
            {
              "type": "object",
              "properties": {
                "totalSubjects": {
                  "type": "integer",
                  "minimum": 0
                }
              },
              "required": ["totalSubjects"],
              "additionalProperties": false
            }
          ]
        },
        "DepartmentTotals": {
          "type": "object",
          "properties": {
            "subjects": {
              "type": "integer",
              "minimum": 0
            },
            "classes": {
              "type": "integer",
              "minimum": 0
            },
            "enrolledStudents": {
              "type": "integer",
              "minimum": 0
            }
          },
          "required": ["subjects", "classes", "enrolledStudents"],
          "additionalProperties": false
        },
        "DepartmentWithTotals": {
          "type": "object",
          "properties": {
            "department": {
              "$ref": "#/components/schemas/Department"
            },
            "totals": {
              "$ref": "#/components/schemas/DepartmentTotals"
            }
          },
          "required": ["department", "totals"],
          "additionalProperties": false
        }
      },
      "parameters": {
        "Page": {
          "name": "page",
          "in": "query",
          "schema": {
            "type": "integer",
            "minimum": 1,
            "default": 1
          }
        },
        "Limit": {
          "name": "limit",
          "in": "query",
          "schema": {
            "type": "integer",
            "minimum": 1,
            "default": 10
          }
        },
        "DepartmentId": {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer"
          }
        },
        "SubjectId": {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer"
          }
        },
        "ClassId": {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer"
          }
        },
        "UserId": {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        "PageParam": {
          "name": "page",
          "in": "query",
          "description": "Page number (1-based)",
          "schema": {
            "type": "integer",
            "default": 1,
            "minimum": 1
          }
        },
        "LimitParam": {
          "name": "limit",
          "in": "query",
          "description": "Items per page",
          "schema": {
            "type": "integer",
            "default": 10,
            "minimum": 1
          }
        },
        "SearchParam": {
          "name": "search",
          "in": "query",
          "description": "Free-text search",
          "schema": {
            "type": "string"
          }
        }
      }
    },
    "security": [
      {
        "cookieAuth": []
      }
    ],
    "paths": {
      "api/auth/get-session": {
        "get": {
          "summary": "Get current session",
          "description": "Returns the currently authenticated user's session and user information. If no valid session exists, returns null.",
          "tags": ["Auth"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "responses": {
            "200": {
              "description": "Session information or null if not authenticated",
              "content": {
                "application/json": {
                  "schema": {
                    "oneOf": [
                      {
                        "type": "object",
                        "properties": {
                          "user": {
                            "type": "object",
                            "description": "Authenticated user profile"
                          },
                          "session": {
                            "type": "object",
                            "description": "Active session metadata"
                          }
                        },
                        "required": ["user", "session"],
                        "additionalProperties": true
                      },
                      {
                        "type": "null",
                        "description": "No active session"
                      }
                    ]
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized (only if explicitly enforced by the API)",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      }
                    },
                    "required": ["error"]
                  }
                }
              }
            }
          }
        }
      },
      "api/auth/sign-in/email": {
        "post": {
          "summary": "Sign in with email",
          "description": "Signs in and sets session cookie.",
          "tags": ["Auth"],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["email", "password"],
                  "properties": {
                    "email": {
                      "type": "string",
                      "format": "email"
                    },
                    "password": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Signed in, session cookie set",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "user": {
                        "$ref": "#/components/schemas/User"
                      }
                    },
                    "required": ["user"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Invalid credentials",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "security": [
            {
              "cookieAuth": []
            }
          ]
        }
      },
      "api/auth/sign-out": {
        "post": {
          "summary": "Sign out",
          "description": "Clears the session cookie.",
          "tags": ["Auth"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "responses": {
            "200": {
              "description": "Signed out"
            },
            "401": {
              "description": "Not authenticated",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "api/auth/sign-up/email": {
        "post": {
          "summary": "Sign up with email",
          "description": "Creates a new account and signs the user in. Sets session cookie.",
          "tags": ["Auth"],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": ["email", "password", "name", "role"],
                  "properties": {
                    "email": {
                      "type": "string",
                      "format": "email"
                    },
                    "password": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string",
                      "enum": ["admin", "teacher", "student"]
                    },
                    "imageCldPubId": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Signed up, session cookie set",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "user": {
                        "type": "object"
                      },
                      "session": {
                        "type": "object"
                      }
                    },
                    "additionalProperties": true
                  }
                }
              }
            },
            "400": {
              "description": "Request validation or registration error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RegistrationErrorResponse"
                  }
                }
              }
            },
            "409": {
              "description": "Email already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "security": [
            {
              "cookieAuth": []
            }
          ]
        }
      },
      "api/auth/update-user": {
        "post": {
          "tags": ["Auth"],
          "summary": "Update current user",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "responses": {
            "200": {
              "description": "OK"
            },
            "400": {
              "description": "Bad request",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          },
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true
                }
              }
            }
          }
        }
      },
  
      "api/classes": {
        "get": {
          "summary": "Get all classes",
          "description": "Retrieve a paginated list of classes with optional filters. Requires authentication (cookie) and role admin/teacher/student.",
          "tags": ["Classes"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "query",
              "name": "search",
              "schema": {
                "type": "string"
              },
              "description": "Search by class name or invite code"
            },
            {
              "in": "query",
              "name": "subjectId",
              "schema": {
                "type": "integer"
              },
              "description": "Filter by subject ID"
            },
            {
              "in": "query",
              "name": "teacherId",
              "schema": {
                "type": "string"
              },
              "description": "Filter by teacher ID"
            },
            {
              "in": "query",
              "name": "status",
              "schema": {
                "type": "string",
                "enum": ["active", "inactive", "archived"]
              },
              "description": "Filter by status"
            },
            {
              "$ref": "#/components/parameters/PageParam"
            },
            {
              "$ref": "#/components/parameters/LimitParam"
            }
          ],
          "responses": {
            "200": {
              "description": "Classes retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/Class"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "post": {
          "summary": "Create a new class",
          "description": "Create a new class. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Classes"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClassCreate"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Class created successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Class"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Subject or Teacher not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Invite code already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/classes/invite/{code}": {
        "get": {
          "summary": "Get class by invite code",
          "description": "Retrieve a class using its invite code. Requires authentication (cookie) and role admin/teacher/student.",
          "tags": ["Classes"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "code",
              "required": true,
              "schema": {
                "type": "string"
              },
              "description": "Class invite code"
            }
          ],
          "responses": {
            "200": {
              "description": "Class retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Class"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Class not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/classes/{id}": {
        "get": {
          "summary": "Get class by ID",
          "description": "Retrieve a specific class by ID. Requires authentication (cookie) and role admin/teacher/student.",
          "tags": ["Classes"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Class ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Class retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Class"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Class not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "put": {
          "summary": "Update class",
          "description": "Update an existing class. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Classes"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Class ID"
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClassUpdate"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Class updated successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Class"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Class or Subject not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Invite code already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "summary": "Delete class",
          "description": "Delete a class by ID. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Classes"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Class ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Class deleted",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Class not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/classes/{id}/users": {
        "get": {
          "tags": ["Classes"],
          "summary": "List users in a class",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/ClassId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            },
            {
              "name": "role",
              "in": "query",
              "schema": {
                "type": "string",
                "enum": ["teacher", "student"]
              },
              "required": false
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/User"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/departments": {
        "get": {
          "summary": "Get all departments",
          "description": "Retrieve a paginated list of departments with optional search. Requires authentication (cookie) and role admin/teacher/student.",
          "tags": ["Departments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "query",
              "name": "search",
              "schema": {
                "type": "string"
              },
              "description": "Search by department name or code"
            },
            {
              "$ref": "#/components/parameters/PageParam"
            },
            {
              "$ref": "#/components/parameters/LimitParam"
            }
          ],
          "responses": {
            "200": {
              "description": "Departments retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/DepartmentListItem"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "post": {
          "summary": "Create a new department",
          "description": "Create a new department. Requires authentication (cookie) and role admin.",
          "tags": ["Departments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepartmentCreate"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Department created successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Department"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Department code already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/departments/{id}": {
        "get": {
          "summary": "Get department by ID",
          "description": "Retrieve a specific department by ID. Requires authentication (cookie) and role admin/teacher/student.",
          "tags": ["Departments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Department ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Department retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/DepartmentWithTotals"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Department not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "put": {
          "summary": "Update department",
          "description": "Update an existing department. Requires authentication (cookie) and role admin.",
          "tags": ["Departments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Department ID"
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepartmentUpdate"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Department updated successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Department"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Department not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Department code already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "summary": "Delete department",
          "description": "Delete a department by ID. Requires authentication (cookie) and role admin.",
          "tags": ["Departments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Department ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Department deleted",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Department not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/departments/{id}/classes": {
        "get": {
          "tags": ["Departments"],
          "summary": "List classes in a department",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/DepartmentId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            },
            {
              "name": "status",
              "in": "query",
              "schema": {
                "type": "string",
                "enum": ["active", "inactive", "archived"]
              },
              "required": false
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/Class"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/departments/{id}/subjects": {
        "get": {
          "tags": ["Departments"],
          "summary": "List subjects in a department",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/DepartmentId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/Subject"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/departments/{id}/users": {
        "get": {
          "tags": ["Departments"],
          "summary": "List users in a department (teachers & students)",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/DepartmentId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            },
            {
              "name": "role",
              "in": "query",
              "schema": {
                "type": "string",
                "enum": ["teacher", "student"]
              },
              "required": false
            },
            {
              "name": "search",
              "in": "query",
              "schema": {
                "type": "string"
              },
              "required": false
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/User"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/enrollments": {
        "get": {
          "summary": "Get all enrollments",
          "description": "Retrieve a paginated list of enrollments with optional filters. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Enrollments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "query",
              "name": "classId",
              "schema": {
                "type": "integer"
              },
              "description": "Filter by class ID"
            },
            {
              "in": "query",
              "name": "studentId",
              "schema": {
                "type": "string"
              },
              "description": "Filter by student ID"
            },
            {
              "$ref": "#/components/parameters/PageParam"
            },
            {
              "$ref": "#/components/parameters/LimitParam"
            }
          ],
          "responses": {
            "200": {
              "description": "Enrollments retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/Enrollment"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "post": {
          "summary": "Create enrollment",
          "description": "Enroll the authenticated user in a class. Requires authentication (cookie) and role admin/teacher/student. Student id is taken from session.",
          "tags": ["Enrollments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnrollmentCreate"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Enrollment created successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Enrollment"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Class or Student not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Student already enrolled in class",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/enrollments/join": {
        "post": {
          "summary": "Join class by invite code",
          "description": "Enroll the authenticated user in a class using an invite code. Requires authentication (cookie) and role admin/teacher/student. Student id is taken from session.",
          "tags": ["Enrollments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnrollmentJoin"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Enrollment created successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Enrollment"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Class or Student not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Student already enrolled in class",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/enrollments/{id}": {
        "get": {
          "summary": "Get enrollment by ID",
          "description": "Retrieve a specific enrollment by ID. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Enrollments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Enrollment ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Enrollment retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Enrollment"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Enrollment not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "put": {
          "summary": "Update enrollment",
          "description": "Update an existing enrollment. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Enrollments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Enrollment ID"
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnrollmentUpdate"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Enrollment updated successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/Enrollment"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Enrollment, Class or Student not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Student already enrolled in class",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "summary": "Delete enrollment",
          "description": "Delete an enrollment by ID. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Enrollments"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Enrollment ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Enrollment deleted",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Enrollment not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/subjects": {
        "get": {
          "summary": "Get all subjects",
          "description": "Retrieve a paginated list of subjects with optional search and department filter. Returns each subject with its joined department. Requires authentication (cookie) and role admin/teacher/student.",
          "tags": ["Subjects"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "query",
              "name": "search",
              "schema": {
                "type": "string"
              },
              "description": "Search subjects by name or code"
            },
            {
              "in": "query",
              "name": "department",
              "schema": {
                "type": "string"
              },
              "description": "Filter by department name (fuzzy match)"
            },
            {
              "$ref": "#/components/parameters/PageParam"
            },
            {
              "$ref": "#/components/parameters/LimitParam"
            }
          ],
          "responses": {
            "200": {
              "description": "Subjects retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/SubjectWithDepartment"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "post": {
          "summary": "Create a new subject",
          "description": "Create a new subject. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Subjects"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubjectCreate"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Subject created successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/SubjectWithDepartment"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Department not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Subject code already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/subjects/{id}": {
        "get": {
          "summary": "Get subject by ID",
          "description": "Retrieve a specific subject by ID. Requires authentication (cookie) and role admin/teacher/student.",
          "tags": ["Subjects"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Subject ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Subject retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/SubjectWithDepartment"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Subject not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "put": {
          "summary": "Update subject",
          "description": "Update an existing subject. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Subjects"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Subject ID"
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubjectUpdate"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Subject updated successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/SubjectWithDepartment"
                      }
                    },
                    "required": ["data"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Subject or Department not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Subject code already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "summary": "Delete subject",
          "description": "Delete a subject by ID. Requires authentication (cookie) and role admin/teacher.",
          "tags": ["Subjects"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "integer"
              },
              "description": "Subject ID"
            }
          ],
          "responses": {
            "200": {
              "description": "Subject deleted",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "Subject not found",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/subjects/{id}/classes": {
        "get": {
          "tags": ["Subjects"],
          "summary": "List classes for a subject",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/SubjectId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            },
            {
              "name": "status",
              "in": "query",
              "schema": {
                "type": "string",
                "enum": ["active", "inactive", "archived"]
              },
              "required": false
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/Class"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/subjects/{id}/users": {
        "get": {
          "tags": ["Subjects"],
          "summary": "List users related to a subject",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/SubjectId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            },
            {
              "name": "role",
              "in": "query",
              "schema": {
                "type": "string",
                "enum": ["teacher", "student"]
              },
              "required": false
            },
            {
              "name": "search",
              "in": "query",
              "schema": {
                "type": "string"
              },
              "required": false
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/User"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/users": {
        "get": {
          "summary": "Get all users",
          "description": "Retrieve a paginated list of users with optional role filter and name search. Requires authentication (cookie) and role admin.",
          "tags": ["Users"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "query",
              "name": "role",
              "schema": {
                "type": "string",
                "enum": ["admin", "teacher", "student"]
              },
              "description": "Filter by role"
            },
            {
              "in": "query",
              "name": "search",
              "schema": {
                "type": "string"
              },
              "description": "Search by user name"
            },
            {
              "$ref": "#/components/parameters/PageParam"
            },
            {
              "$ref": "#/components/parameters/LimitParam"
            }
          ],
          "responses": {
            "200": {
              "description": "Users retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/User"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["data", "pagination", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "post": {
          "summary": "Create user",
          "description": "Create a new user. Requires authentication (cookie) and role admin.",
          "tags": ["Users"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserCreate"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "User created successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/User"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["data", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "409": {
              "description": "Email already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["error", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/users/{id}": {
        "get": {
          "summary": "Get user by ID",
          "description": "Retrieve a user by ID. Requires authentication (cookie) and role admin.",
          "tags": ["Users"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              },
              "description": "User ID"
            }
          ],
          "responses": {
            "200": {
              "description": "User retrieved successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/User"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["data", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "User not found",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["error", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "put": {
          "summary": "Update user",
          "description": "Update a user by ID. Requires authentication (cookie) and role admin.",
          "tags": ["Users"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              },
              "description": "User ID"
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserUpdate"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "User updated successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/User"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["data", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "User not found",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["error", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "409": {
              "description": "Email already exists",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["error", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "summary": "Delete user",
          "description": "Delete a user by ID. Requires authentication (cookie) and role admin.",
          "tags": ["Users"],
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              },
              "description": "User ID"
            }
          ],
          "responses": {
            "200": {
              "description": "User deleted successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/User"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["data", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "404": {
              "description": "User not found",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "error": {
                        "type": "string"
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": ["error", "message"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/users/{id}/departments": {
        "get": {
          "tags": ["Users"],
          "summary": "List departments for a user (teacher/student)",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/UserId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/Department"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      },
      "api/users/{id}/subjects": {
        "get": {
          "tags": ["Users"],
          "summary": "List subjects for a user (teacher/student)",
          "security": [
            {
              "cookieAuth": []
            }
          ],
          "parameters": [
            {
              "$ref": "#/components/parameters/UserId"
            },
            {
              "$ref": "#/components/parameters/Page"
            },
            {
              "$ref": "#/components/parameters/Limit"
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/SubjectWithDepartment"
                        }
                      },
                      "pagination": {
                        "$ref": "#/components/schemas/Pagination"
                      }
                    },
                    "required": ["data", "pagination"],
                    "additionalProperties": false
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            },
            "500": {
              "description": "Server error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Error"
                  }
                }
              }
            }
          }
        }
      }
    },
    "tags": [
      {
        "name": "Auth",
        "description": "Authentication (Better Auth) endpoints"
      }
    ]
  }
  